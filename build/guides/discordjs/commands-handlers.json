{"meta":{"title":"Commands Handlers","description":"Loads commands and run it with event handlers","tags":"discordjs, command handlers","image":"https://camo.githubusercontent.com/40129aa4640399b5e65cc3c101361a6a0b5d6467/68747470733a2f2f646973636f72642e6a732e6f72672f7374617469632f6c6f676f2e737667","writtenAt":"18 Jun 2020 14:28"},"body":"<h2>Creating a Collection to store Commands and Aliases</h2>\n<ul>\n<li>Open your <code>index.js</code></li>\n<li>Put the below code in that</li>\n</ul>\n<pre><code class=\"language-javascript\">client.commands = new Discord.Collection();\nclient.aliases = new Discord.Collection();\n</code></pre>\n<hr>\n<h2>Creating a commands folder</h2>\n<ul>\n<li>Create a folder <code>commands</code> in the directory</li>\n<li>Enter the below in <code>index.js</code></li>\n</ul>\n<pre><code class=\"language-javascript\">fs.readdir(&quot;./commands/&quot;, (error, files) =&gt; {\n    if(error) console.error(error); // return if a error\n    files.forEach(f =&gt; {\n        if(!f.endsWith(&quot;.js&quot;)) return;\n        let props = require(`./commands/${f}`); // require the file\n        client.commands.set(props.help.name, props); // set the properties\n        props.help.aliases.forEach(alias =&gt; client.aliases.set(alias, props.help.name)); // set the aliases\n        console.log(`Loaded ${props.help.name} (${f})`);\n    });\n});\n</code></pre>\n<div class=\"admonition info\">\n<p class=\"admonition-title\">info</p>\n<p>Commands folder is read using <code>fs</code>  module.</p>\n</div>\n<hr>\n<h2>Creating message event</h2>\n<ul>\n<li>Create a new file called <code>message.js</code> in <code>events</code> folder.</li>\n<li>Enter the below in <code>message.js</code></li>\n</ul>\n<pre><code class=\"language-javascript\">module.exports = async (client, message) =&gt; {\n    if(message.author.bot) return; // return if the message is from a bot\n    client.prefix = '!';\n    if(message.content.indexOf(client.prefix) !== 0) return; // Check if there is the prefix at the start\n    const args = message.content.split(/\\s+/g); // Splits at spaces and converts to Array\n    const command = args.shift().slice(client.prefix.length).toLowerCase(); // Slices the Command name from args and deletes the prefix from sliced name and changes to lowercase\n    const cmd = client.commands.get(command); // Gets the Command Info\n    if(!cmd) return; // Returns if there in no Command\n    cmd.run(client, message, args); // Runs the module.exports.run function\n};\n</code></pre>\n","env":null}